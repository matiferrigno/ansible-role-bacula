---

###
# Messages
###
bacula_messages_default: bacula-msg
bacula_messages_from: "root@{{ ansible_fqdn }}"
bacula_messages_rcpt: "root@{{ ansible_fqdn }}"
bacula_message_mail_subject: "Bacula: %t %e of %c %l"
bacula_message_operator_subject: "Bacula: Intervention needed for %j"
bacula_messages_relay: 127.0.0.1
bacula__default__messages:
  - Name: bacula-msg
    MailCommand: "{{ bacula_root }}/bin/bsmtp -h {{ bacula_messages_relay }} -f {{ bacula_messages_from }} -s '{{ bacula_message_mail_subject }}' %r"
    Operatorcommand: "{{ bacula_root }}/bin/bsmtp -h {{ bacula_messages_relay }} -f {{ bacula_messages_from }} -s '{{ bacula_message_operator_subject }}' %r"
    Mail: "{{ bacula_messages_rcpt }} = error, warning, !skipped, !terminate, !restored"
    Append:
      - "'{{ bacula_root }}/log/info.log' = info, terminate"
      - "'{{ bacula_root }}/log/error_warning.log' = error, warning, !terminate, notsaved"
      - "'{{ bacula_root }}/log/all.log' = all"
    Operator: "{{ bacula_messages_rcpt }} = mount"
    Console: "error, warning, !terminate"
    Syslog: all


bacula_messages: |
  {{
    bacula__default__messages +
    bacula_messages_custom | default([])
  }}
