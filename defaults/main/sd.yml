---

bacula_storage_devices_root: "/var/backups"

bacula__common__storage:
  Name: bacula-sd
  SDAddress: |
    {{
      ansible_default_ipv4.address | default('0.0.0.0')
    }}
  WorkingDirectory: "{{ bacula_root + '/working/' }}"
  PidDirectory: "{{ bacula_root + '/working/' }}"
  Maximum_Concurrent_Jobs: 20
  Plugin_Directory: "{{ bacula_root }}/plugins/"

bacula__default__storage_director:
  Name: "{{ bacula__default__director.Name }}"
  Description: "{{ bacula__default__director.Description }}"
  Password: "changeme!"

bacula__common__device:
  Name: FileStorage-#client#
  Media_Type: File
  Device_Type: File
  Archive_Device: "{{ bacula_storage_devices_root }}/#client#"
  LabelMedia: yes
  Random_Access: yes
  AutomaticMount: yes
  RemovableMedia: no
  AlwaysOpen: no

bacula__dynamic__devices: yes

bacula__default__devices:
  - Name: FileStorage-default
    Media_Type: File
    Device_Type: File
    Archive_Device: "{{ bacula_storage_devices_root }}/default"
    LabelMedia: yes
    Random_Access: yes
    AutomaticMount: yes
    RemovableMedia: no
    AlwaysOpen: no
  - Name: FileStorage-#client#
    Media_Type: File
    Device_Type: File
    Archive_Device: "{{ bacula_storage_devices_root }}/#client#"
    LabelMedia: yes
    Random_Access: yes
    AutomaticMount: yes
    RemovableMedia: no
    AlwaysOpen: no

bacula_devices: |
  {{
    bacula__default__devices | default([]) +
    bacula_custom_devices | default([])
  }}

